<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Zama Community Hub</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
  <style>
    body {margin:0; font-family:sans-serif; background:#1a1a1a; color:#eee; display:flex; flex-direction:column; align-items:center; padding:10px;}
    h1 {color:#FF6B6B;}
    .section {margin:15px; padding:15px; border:2px solid #444; border-radius:10px; width:90%; max-width:600px; background:#222;}
    button, select, input {margin:5px; padding:6px 10px; border-radius:5px; border:none; cursor:pointer;}
    canvas{border:2px solid #444; margin-top:10px;}
  </style>
</head>
<body>
<h1>Zama Community Hub</h1>

<!-- 1️⃣ Quiz Tool -->
<div class="section" id="quizSection">
  <h2>Zama Quiz</h2>
  <div id="quiz"></div>
  <button onclick="checkAnswer()">Submit Answer</button>
  <div id="score"></div>
</div>

<!-- 2️⃣ Logo / Art Generator -->
<div class="section">
  <h2>Zama Logo Generator</h2>
  <canvas id="logoCanvas" width="300" height="300"></canvas>
  <select id="shape">
    <option value="circle">Circle</option>
    <option value="hex">Hexagon</option>
    <option value="triangle">Triangle</option>
  </select>
  <select id="palette">
    <option value="warm">Warm</option>
    <option value="cool">Cool</option>
  </select>
  <button onclick="drawLogo()">Generate Logo</button>
</div>

<!-- 3️⃣ Random Fact / Tip -->
<div class="section">
  <h2>Zama Fact Generator</h2>
  <div id="fact"></div>
  <button onclick="newFact()">Show Fact</button>
</div>

<!-- 4️⃣ Poll / Vote -->
<div class="section">
  <h2>Vote Your Favorite Zama Feature</h2>
  <label><input type="radio" name="vote" value="Perps Dex">Perps Dex</label>
  <label><input type="radio" name="vote" value="AI Tools">AI Tools</label>
  <label><input type="radio" name="vote" value="Community Quests">Community Quests</label>
  <button onclick="submitVote()">Vote</button>
  <div id="pollResult"></div>
</div>

<!-- 5️⃣ Countdown Timer -->
<div class="section">
  <h2>Next Zama Update</h2>
  <div id="timer"></div>
</div>

<script>
/* --------- 1️⃣ Quiz Tool --------- */
let questions = [
  {q:"What is Zama?", options:["AI Project","Crypto Dex"], answer:1},
  {q:"Which feature is Perps Dex?", options:["Trading","Gaming"], answer:0}
];
function renderQuiz(){
  let html = "";
  questions.forEach((ques,i)=>{
    html += `<p>${i+1}. ${ques.q}</p>`;
    ques.options.forEach((opt,j)=>{
      html += `<label><input type="radio" name="q${i}" value="${j}"> ${opt}</label><br>`;
    });
  });
  document.getElementById("quiz").innerHTML = html;
}
function checkAnswer(){
  let score=0;
  questions.forEach((ques,i)=>{
    let val = document.querySelector(`input[name="q${i}"]:checked`);
    if(val && parseInt(val.value) === ques.answer) score++;
  });
  document.getElementById("score").innerText = `Score: ${score} / ${questions.length}`;
}
renderQuiz();

/* --------- 2️⃣ Logo Generator --------- */
let canvas = document.getElementById("logoCanvas");
let ctx = canvas.getContext("2d");
function drawLogo(){
  let shape = document.getElementById("shape").value;
  let palette = document.getElementById("palette").value;
  let colors = palette === "warm" ? ["#FF6B6B","#FFD93D","#6BCB77"] : ["#4D96FF","#28C7A9","#C77DFF"];
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = colors[0];
  ctx.strokeStyle = colors[1];
  ctx.lineWidth = 5;
  let cx = canvas.width/2, cy = canvas.height/2;
  let size = 100;
  if(shape==="circle") ctx.beginPath(), ctx.arc(cx,cy,size,0,2*Math.PI), ctx.fill(), ctx.stroke();
  if(shape==="triangle") ctx.beginPath(), ctx.moveTo(cx,cy-size), ctx.lineTo(cx-size,cy+size), ctx.lineTo(cx+size,cy+size), ctx.closePath(), ctx.fill(), ctx.stroke();
  if(shape==="hex") { ctx.beginPath(); for(let i=0;i<6;i++){ let angle=Math.PI/3*i; let x=cx+size*Math.cos(angle), y=cy+size*Math.sin(angle); i===0?ctx.moveTo(x,y):ctx.lineTo(x,y); } ctx.closePath(); ctx.fill(); ctx.stroke();}
  ctx.fillStyle = colors[2]; ctx.font="40px sans-serif"; ctx.textAlign="center"; ctx.textBaseline="middle"; ctx.fillText("Z",cx,cy);
}

/* --------- 3️⃣ Fact Generator --------- */
let facts = [
  "Zama's Perps Dex is fully decentralized.",
  "Zama integrates AI tools for smarter trading.",
  "Community Quests give points and rewards."
];
function newFact(){
  document.getElementById("fact").innerText = facts[Math.floor(Math.random()*facts.length)];
}
newFact();

/* --------- 4️⃣ Poll / Vote --------- */
let votes=[0,0,0]; // perps, AI, quests
function submitVote(){
  let val = document.querySelector('input[name="vote"]:checked');
  if(!val){ alert("Select an option!"); return; }
  let idx = ["Perps Dex","AI Tools","Community Quests"].indexOf(val.value);
  votes[idx]++;
  document.getElementById("pollResult").innerText = `Votes: Perps Dex=${votes[0]}, AI Tools=${votes[1]}, Community Quests=${votes[2]}`;
}

/* --------- 5️⃣ Countdown Timer --------- */
let endTime = new Date("2025-12-20T00:00:00").getTime();
setInterval(()=>{
  let now = new Date().getTime();
  let diff = endTime - now;
  if(diff<0){ document.getElementById("timer").innerText="Update Released!"; return; }
  let days = Math.floor(diff/(1000*60*60*24));
  let hrs = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  let mins = Math.floor((diff%(1000*60*60))/(1000*60));
  let secs = Math.floor((diff%(1000*60))/1000);
  document.getElementById("timer").innerText=`${days}d ${hrs}h ${mins}m ${secs}s left`;
},1000);

</script>
</body>
</html>
